{"ast":null,"code":"import { ElementRef, Renderer2, inject, input } from '@angular/core';\nimport { PlatformCheckService } from '../services/platform-check.service';\nimport * as i0 from \"@angular/core\";\nexport class ImageSkeletonDirective {\n  constructor() {\n    this.src = input.required();\n    this.platformCheck = inject(PlatformCheckService);\n    this.imageRef = inject(ElementRef);\n    this.renderer = inject(Renderer2);\n    this.defaultLocalImage = 'data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';\n  }\n  ngOnChanges() {\n    this.initImage();\n  }\n  initImage() {\n    if (this.platformCheck.onServer) {\n      return;\n    }\n    this.renderer.addClass(this.imageRef.nativeElement, 'animate-skeleton-loading');\n    const img = new Image();\n    if (!this.src) {\n      return;\n    }\n    img.onload = () => {\n      this.setImage(this.resolveImage(this.src()));\n      this.renderer.removeClass(this.imageRef.nativeElement, 'animate-skeleton-loading');\n    };\n    img.onerror = () => {\n      this.setImage(this.defaultLocalImage);\n      this.renderer.removeClass(this.imageRef.nativeElement, 'animate-skeleton-loading');\n    };\n    img.src = this.resolveImage(this.src());\n  }\n  setImage(src) {\n    this.imageRef.nativeElement.setAttribute('src', src);\n  }\n  resolveImage(src) {\n    if (!src) {\n      return this.defaultLocalImage;\n    }\n    return src;\n  }\n  static #_ = this.ɵfac = function ImageSkeletonDirective_Factory(t) {\n    return new (t || ImageSkeletonDirective)();\n  };\n  static #_2 = this.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: ImageSkeletonDirective,\n    selectors: [[\"img\", \"skeleton\", \"\"]],\n    inputs: {\n      src: [i0.ɵɵInputFlags.SignalBased, \"src\"]\n    },\n    standalone: true,\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n}","map":{"version":3,"names":["ElementRef","Renderer2","inject","input","PlatformCheckService","ImageSkeletonDirective","constructor","src","required","platformCheck","imageRef","renderer","defaultLocalImage","ngOnChanges","initImage","onServer","addClass","nativeElement","img","Image","onload","setImage","resolveImage","removeClass","onerror","setAttribute","_","_2","selectors","inputs","i0","ɵɵInputFlags","SignalBased","standalone","features","ɵɵNgOnChangesFeature"],"sources":["C:\\Users\\Vyankat\\Downloads\\kevinflor.es-master\\kevinflor.es-master\\src\\app\\core\\directives\\image-skeleton.directive.ts"],"sourcesContent":["\nimport {\n  Directive,\n  ElementRef,\n  Renderer2,\n  inject,\n  input,\n} from '@angular/core';\nimport { PlatformCheckService } from '../services/platform-check.service';\ntype ImageSrc = string | null | undefined;\n\n@Directive({\n  selector: 'img[skeleton]',\n  standalone: true\n})\n\nexport class ImageSkeletonDirective {\n  src = input.required<ImageSrc>();\n  platformCheck = inject(PlatformCheckService);\n  imageRef = inject(ElementRef);\n  renderer = inject(Renderer2);\n\n  private defaultLocalImage = 'data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';\n\n  ngOnChanges(): void {\n    this.initImage();\n  }\n\n  private initImage() {\n    if (this.platformCheck.onServer) {\n      return;\n    }\n    this.renderer.addClass(this.imageRef.nativeElement, 'animate-skeleton-loading');\n    const img = new Image();\n    if (!this.src) {\n      return;\n    }\n    img.onload = () => {\n      this.setImage(this.resolveImage(this.src()));\n      this.renderer.removeClass(this.imageRef.nativeElement, 'animate-skeleton-loading');\n    };\n\n    img.onerror = () => {\n      this.setImage(this.defaultLocalImage);\n      this.renderer.removeClass(this.imageRef.nativeElement, 'animate-skeleton-loading');\n    };\n    img.src = this.resolveImage(this.src());\n  }\n\n  private setImage(src: ImageSrc) {\n    this.imageRef.nativeElement.setAttribute('src', src);\n  }\n\n  private resolveImage(src: ImageSrc): string {\n    if (!src) {\n      return this.defaultLocalImage;\n    }\n    return src;\n  }\n\n}\n"],"mappings":"AACA,SAEEA,UAAU,EACVC,SAAS,EACTC,MAAM,EACNC,KAAK,QACA,eAAe;AACtB,SAASC,oBAAoB,QAAQ,oCAAoC;;AAQzE,OAAM,MAAOC,sBAAsB;EALnCC,YAAA;IAME,KAAAC,GAAG,GAAGJ,KAAK,CAACK,QAAQ,EAAY;IAChC,KAAAC,aAAa,GAAGP,MAAM,CAACE,oBAAoB,CAAC;IAC5C,KAAAM,QAAQ,GAAGR,MAAM,CAACF,UAAU,CAAC;IAC7B,KAAAW,QAAQ,GAAGT,MAAM,CAACD,SAAS,CAAC;IAEpB,KAAAW,iBAAiB,GAAG,oFAAoF;;EAEhHC,WAAWA,CAAA;IACT,IAAI,CAACC,SAAS,EAAE;EAClB;EAEQA,SAASA,CAAA;IACf,IAAI,IAAI,CAACL,aAAa,CAACM,QAAQ,EAAE;MAC/B;;IAEF,IAAI,CAACJ,QAAQ,CAACK,QAAQ,CAAC,IAAI,CAACN,QAAQ,CAACO,aAAa,EAAE,0BAA0B,CAAC;IAC/E,MAAMC,GAAG,GAAG,IAAIC,KAAK,EAAE;IACvB,IAAI,CAAC,IAAI,CAACZ,GAAG,EAAE;MACb;;IAEFW,GAAG,CAACE,MAAM,GAAG,MAAK;MAChB,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACC,YAAY,CAAC,IAAI,CAACf,GAAG,EAAE,CAAC,CAAC;MAC5C,IAAI,CAACI,QAAQ,CAACY,WAAW,CAAC,IAAI,CAACb,QAAQ,CAACO,aAAa,EAAE,0BAA0B,CAAC;IACpF,CAAC;IAEDC,GAAG,CAACM,OAAO,GAAG,MAAK;MACjB,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACT,iBAAiB,CAAC;MACrC,IAAI,CAACD,QAAQ,CAACY,WAAW,CAAC,IAAI,CAACb,QAAQ,CAACO,aAAa,EAAE,0BAA0B,CAAC;IACpF,CAAC;IACDC,GAAG,CAACX,GAAG,GAAG,IAAI,CAACe,YAAY,CAAC,IAAI,CAACf,GAAG,EAAE,CAAC;EACzC;EAEQc,QAAQA,CAACd,GAAa;IAC5B,IAAI,CAACG,QAAQ,CAACO,aAAa,CAACQ,YAAY,CAAC,KAAK,EAAElB,GAAG,CAAC;EACtD;EAEQe,YAAYA,CAACf,GAAa;IAChC,IAAI,CAACA,GAAG,EAAE;MACR,OAAO,IAAI,CAACK,iBAAiB;;IAE/B,OAAOL,GAAG;EACZ;EAAC,QAAAmB,CAAA,G;qBA1CUrB,sBAAsB;EAAA;EAAA,QAAAsB,EAAA,G;UAAtBtB,sBAAsB;IAAAuB,SAAA;IAAAC,MAAA;MAAAtB,GAAA,GAAAuB,EAAA,CAAAC,YAAA,CAAAC,WAAA;IAAA;IAAAC,UAAA;IAAAC,QAAA,GAAAJ,EAAA,CAAAK,oBAAA;EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}