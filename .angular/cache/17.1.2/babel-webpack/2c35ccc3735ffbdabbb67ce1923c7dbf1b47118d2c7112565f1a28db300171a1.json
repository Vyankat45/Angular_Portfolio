{"ast":null,"code":"import { ApplicationRef, ComponentFactoryResolver, ElementRef, Injector, inject, input } from '@angular/core';\nimport { Tooltip as TooltipComponent } from \"./tooltip\";\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nexport class TooltipDirective {\n  constructor() {\n    this.tooltip = input('');\n    this.showDelay = input(0);\n    this.hideDelay = input(0);\n    this.componentRef = null;\n    this.elementRef = inject(ElementRef);\n    this.appRef = inject(ApplicationRef);\n    this.document = inject(DOCUMENT);\n    this.componentFactoryResolver = inject(ComponentFactoryResolver);\n    this.injector = inject(Injector);\n  }\n  onMouseEnter() {\n    this.initializeTooltip();\n  }\n  onMouseLeave() {\n    this.setHideTooltipTimeout();\n  }\n  onTouchStart($event) {\n    $event.preventDefault();\n    window.clearTimeout(this.touchTimeout);\n    this.touchTimeout = window.setTimeout(this.initializeTooltip.bind(this), 500);\n  }\n  onTouchEnd() {\n    window.clearTimeout(this.touchTimeout);\n    this.setHideTooltipTimeout();\n  }\n  initializeTooltip() {\n    if (this.componentRef === null) {\n      window.clearInterval(this.hideDelay());\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TooltipComponent);\n      this.componentRef = componentFactory.create(this.injector);\n      this.appRef.attachView(this.componentRef.hostView);\n      const [tooltipDOMElement] = this.componentRef.hostView.rootNodes;\n      this.setTooltipComponentProperties();\n      this.document.body.appendChild(tooltipDOMElement);\n      this.showTimeout = window.setTimeout(this.showTooltip.bind(this), this.showDelay());\n    }\n  }\n  setTooltipComponentProperties() {\n    if (this.componentRef !== null) {\n      this.componentRef.instance.tooltip = this.tooltip();\n      const {\n        left,\n        right,\n        top\n      } = this.elementRef.nativeElement.getBoundingClientRect();\n      this.componentRef.instance.left = Math.round((right - left) / 2 + left);\n      this.componentRef.instance.top = Math.round(top);\n    }\n  }\n  showTooltip() {\n    if (this.componentRef !== null) {\n      this.componentRef.instance.visible = true;\n    }\n  }\n  setHideTooltipTimeout() {\n    window.setTimeout(this.destroy.bind(this), this.hideDelay());\n  }\n  ngOnDestroy() {\n    this.destroy();\n  }\n  destroy() {\n    if (this.componentRef !== null) {\n      window.clearInterval(this.showTimeout);\n      window.clearInterval(this.hideDelay());\n      this.appRef.detachView(this.componentRef.hostView);\n      this.componentRef.destroy();\n      this.componentRef = null;\n    }\n  }\n  static #_ = this.ɵfac = function TooltipDirective_Factory(t) {\n    return new (t || TooltipDirective)();\n  };\n  static #_2 = this.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: TooltipDirective,\n    selectors: [[\"\", \"tooltip\", \"\"]],\n    hostBindings: function TooltipDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mouseenter\", function TooltipDirective_mouseenter_HostBindingHandler() {\n          return ctx.onMouseEnter();\n        })(\"mouseleave\", function TooltipDirective_mouseleave_HostBindingHandler() {\n          return ctx.onMouseLeave();\n        })(\"touchstart\", function TooltipDirective_touchstart_HostBindingHandler($event) {\n          return ctx.onTouchStart($event);\n        })(\"touchend\", function TooltipDirective_touchend_HostBindingHandler() {\n          return ctx.onTouchEnd();\n        });\n      }\n    },\n    inputs: {\n      tooltip: [i0.ɵɵInputFlags.SignalBased, \"tooltip\"],\n      showDelay: [i0.ɵɵInputFlags.SignalBased, \"showDelay\"],\n      hideDelay: [i0.ɵɵInputFlags.SignalBased, \"hideDelay\"]\n    },\n    standalone: true\n  });\n}","map":{"version":3,"names":["ApplicationRef","ComponentFactoryResolver","ElementRef","Injector","inject","input","Tooltip","TooltipComponent","DOCUMENT","TooltipDirective","constructor","tooltip","showDelay","hideDelay","componentRef","elementRef","appRef","document","componentFactoryResolver","injector","onMouseEnter","initializeTooltip","onMouseLeave","setHideTooltipTimeout","onTouchStart","$event","preventDefault","window","clearTimeout","touchTimeout","setTimeout","bind","onTouchEnd","clearInterval","componentFactory","resolveComponentFactory","create","attachView","hostView","tooltipDOMElement","rootNodes","setTooltipComponentProperties","body","appendChild","showTimeout","showTooltip","instance","left","right","top","nativeElement","getBoundingClientRect","Math","round","visible","destroy","ngOnDestroy","detachView","_","_2","selectors","hostBindings","TooltipDirective_HostBindings","rf","ctx","TooltipDirective_mouseleave_HostBindingHandler","TooltipDirective_touchstart_HostBindingHandler","TooltipDirective_touchend_HostBindingHandler"],"sources":["C:\\Users\\Vyankat\\Downloads\\kevinflor.es-master\\kevinflor.es-master\\src\\app\\shared\\components\\tooltip\\tooltip.directive.ts"],"sourcesContent":["import {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EmbeddedViewRef,\n  HostListener,\n  Injector,\n  inject,\n  input\n} from '@angular/core';\nimport {Tooltip as TooltipComponent} from \"./tooltip\";\nimport { DOCUMENT } from '@angular/common';\n\n@Directive({\n  selector: '[tooltip]',\n  standalone: true\n})\nexport class TooltipDirective {\n\n  tooltip = input<string>('');\n  showDelay = input<number>(0);\n  hideDelay = input<number>(0)\n\n  private componentRef: ComponentRef<any> | null = null;\n  private showTimeout?: number;\n  private touchTimeout?: number;\n\n  elementRef = inject(ElementRef);\n  appRef = inject(ApplicationRef);\n  document = inject(DOCUMENT);\n  componentFactoryResolver = inject(ComponentFactoryResolver);\n  injector = inject(Injector);\n\n  @HostListener('mouseenter')\n  onMouseEnter(): void {\n    this.initializeTooltip();\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave(): void {\n    this.setHideTooltipTimeout();\n  }\n\n  @HostListener('touchstart', ['$event'])\n  onTouchStart($event: TouchEvent): void {\n    $event.preventDefault();\n    window.clearTimeout(this.touchTimeout);\n    this.touchTimeout = window.setTimeout(this.initializeTooltip.bind(this), 500);\n  }\n\n  @HostListener('touchend')\n  onTouchEnd(): void {\n    window.clearTimeout(this.touchTimeout);\n    this.setHideTooltipTimeout();\n  }\n\n  private initializeTooltip() {\n    if (this.componentRef === null) {\n      window.clearInterval(this.hideDelay());\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TooltipComponent);\n      this.componentRef = componentFactory.create(this.injector);\n\n      this.appRef.attachView(this.componentRef.hostView);\n      const [tooltipDOMElement] = (this.componentRef.hostView as EmbeddedViewRef<any>).rootNodes;\n\n      this.setTooltipComponentProperties();\n\n      this.document.body.appendChild(tooltipDOMElement);\n      this.showTimeout = window.setTimeout(this.showTooltip.bind(this), this.showDelay());\n    }\n  }\n\n  private setTooltipComponentProperties() {\n    if (this.componentRef !== null) {\n      this.componentRef.instance.tooltip = this.tooltip();\n\n      const {left, right, top} = this.elementRef.nativeElement.getBoundingClientRect();\n      this.componentRef.instance.left = Math.round((right - left) / 2 + left);\n      this.componentRef.instance.top = Math.round(top);\n\n    }\n  }\n\n  private showTooltip() {\n    if (this.componentRef !== null) {\n      this.componentRef.instance.visible = true;\n    }\n  }\n\n  private setHideTooltipTimeout() {\n    window.setTimeout(this.destroy.bind(this), this.hideDelay());\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n\n  destroy(): void {\n    if (this.componentRef !== null) {\n      window.clearInterval(this.showTimeout);\n      window.clearInterval(this.hideDelay());\n      this.appRef.detachView(this.componentRef.hostView);\n      this.componentRef.destroy();\n      this.componentRef = null;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}